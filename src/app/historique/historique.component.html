<app-navbar></app-navbar>
<app-loading *ngIf="loading"></app-loading>
<mat-tab-group color="warn">
    <mat-tab>
        <ng-template mat-tab-label>
            <mat-icon color="warn" class="example-tab-icon">library_books</mat-icon>
            Toutes les demandes
        </ng-template>

        <br>
        <mat-list>

            <div class="mat-display-1" mat-header>Historique des demandes cloturées</div>

            <mat-divider></mat-divider>
            <div (click)="openDetailDialog(demande)" matRipple class="animated fadeInLeft list-group"
                *ngFor="let demande of demandesCloturees">
                <h3 mat-subheader>{{demande.objet}}</h3>
                <mat-list-item>
                    <mat-icon mat-list-icon>account_box</mat-icon>
                    <h4 mat-line *ngIf="isAdmin">Demandeur | {{demande.demandeur.username}}</h4>
                    <h4 mat-line>Bénéficiaire | {{demande.beneficiaire.username}}</h4>
                    <p mat-line>Date demande | {{demande.date | date: "fullDate"}} </p>
                    <span class="example-spacer"></span>
                    <button class="bg-success" *ngIf="demande.validation_admin; else outdated" mat-mini-fab>
                        <mat-icon>done</mat-icon>
                    </button>
                    <ng-template #outdated>
                        <button class="bg-warning" *ngIf="demande.status_demande == expire; else refused" mat-mini-fab>
                            <mat-icon>timer_off</mat-icon>
                        </button>
                    </ng-template>
                    <ng-template #refused>
                        <button class="bg-danger" mat-mini-fab>
                            <mat-icon>close</mat-icon>
                        </button>
                    </ng-template>
                </mat-list-item>
                <mat-divider></mat-divider>
            </div>
        </mat-list>
    </mat-tab>

    <mat-tab>
        <ng-template mat-tab-label>
            <mat-icon color="warn" class="example-tab-icon">done_all</mat-icon>
            Demandes acceptées
        </ng-template>

        <br>
        <mat-list>

            <div class="mat-display-1" mat-header>Historique des demandes acceptées</div>

            <mat-divider></mat-divider>
            <div (click)="openDetailDialog(demande)" matRipple class="animated fadeInLeft list-group"
                *ngFor="let demande of demandesAcceptees">
                <h3 mat-subheader>{{demande.objet}}</h3>
                <mat-list-item>
                    <mat-icon mat-list-icon>account_box</mat-icon>
                    <h4 mat-line *ngIf="isAdmin">Demandeur | {{demande.demandeur.username}}</h4>
                    <h4 mat-line>Bénéficiaire | {{demande.beneficiaire.username}}</h4>
                    <p mat-line>Date demande | {{demande.date | date: "fullDate"}} </p>
                </mat-list-item>
                <mat-divider></mat-divider>
            </div>
        </mat-list>
    </mat-tab>

    <mat-tab>
        <ng-template mat-tab-label>
            <mat-icon color="warn" class="example-tab-icon">not_interested</mat-icon>
            Demande refusées
        </ng-template>

        <br>
        <mat-list>

            <div class="mat-display-1" mat-header>Historique des demandes refusées</div>

            <mat-divider></mat-divider>
            <div (click)="openDetailDialog(demande)" matRipple class="animated fadeInLeft list-group"
                *ngFor="let demande of demandesRefusees">
                <h3 mat-subheader>{{demande.objet}}</h3>
                <mat-list-item>
                    <mat-icon mat-list-icon>account_box</mat-icon>
                    <h4 mat-line *ngIf="isAdmin">Demandeur | {{demande.demandeur.username}}</h4>
                    <h4 mat-line>Bénéficiaire | {{demande.beneficiaire.username}}</h4>
                    <p mat-line>Date demande | {{demande.date | date: "fullDate"}} </p>
                </mat-list-item>
                <mat-divider></mat-divider>
            </div>
        </mat-list>
    </mat-tab>

    <mat-tab>
        <ng-template mat-tab-label>
            <mat-icon color="warn" class="example-tab-icon">timer_off</mat-icon>
            Demande expirees
        </ng-template>

        <br>
        <mat-list>

            <div class="mat-display-1" mat-header>Historique des demandes expirées</div>

            <mat-divider></mat-divider>
            <div (click)="openDetailDialog(demande)" matRipple class="animated fadeInLeft list-group"
                *ngFor="let demande of demandesExpirees">
                <h3 mat-subheader>{{demande.objet}}</h3>
                <mat-list-item>
                    <mat-icon mat-list-icon>account_box</mat-icon>
                    <h4 mat-line *ngIf="isAdmin">Demandeur | {{demande.demandeur.username}}</h4>
                    <h4 mat-line>Bénéficiaire | {{demande.beneficiaire.username}}</h4>
                    <p mat-line>Date demande | {{demande.date | date: "fullDate"}} </p>
                </mat-list-item>
                <mat-divider></mat-divider>
            </div>
        </mat-list>
    </mat-tab>
</mat-tab-group>